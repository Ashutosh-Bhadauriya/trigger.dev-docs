---
title: Introduction
---

The integration of OpenAI and Trigger.dev provides a seamless solution for handling long-running tasks in a serverless context. By leveraging background tasks, you can run extensive OpenAI completions without worrying about serverless function time restrictions.

<Snippet file="integration-getting-started.mdx" />

## Installation

Choose your preferred package manager and install the `@trigger.dev/openai` package.

<CodeGroup>

```bash npm
npm install @trigger.dev/openai@latest
```

```bash pnpm
pnpm install @trigger.dev/openai@latest
```

```bash yarn
yarn add @trigger.dev/openai@latest
```

</CodeGroup>

## Authentication

OpenAI supports API Key based authentication. You can sign up for OpenAI and get your API key which will be used to authenticate your requests to OpenAI API.

```ts
import { OpenAI } from "@trigger.dev/openai";

const openai = new OpenAI({
  id: "openai",
  apiKey: process.env.OPENAI_API_KEY!,
});
```

## Example Jobs

Let's take a look at example jobs below, they demonstrate how to utilize background tasks to handle long-running OpenAI completions on a serverless architecture, offloading the workload to Trigger.dev.

These jobs use the `backgroundCreateCompletion` and `backgroundCreateChatCompletion` task to generate a response based on a provided message. The generation might take time depending on the complexity of the message, making these a good candidate for a background tasks.

1. ### "Generate Coding Tips" Job

    This job creates a unique coding tip each day, using OpenAI's text generation capabilities. Such a job can be used to enhance online developer communities or programming courses.

    ```ts
    new Job(client, {
      id: "openai-coding-tips",
      name: "Generate Coding Tips",
      version: "0.0.1",
      trigger: eventTrigger({
        name: "openai.generateCodingTip",
          schema: z.object({}),
        }),
      integrations: {
        openai,
      },
      run: async (payload, io, ctx) => {
        const response = await io.openai.backgroundCreateCompletion(
          "background-coding-tip-completion",
          {
            model: "text-davinci-003",
            prompt: "Coding tip of the day: ",
            max_tokens: 60
          }
        );
      await io.logger.info("coding tip", response.choices);
      },
    });
    ```

2. ### "Chatbot Counseling Session" Job

    This job represents a simulated AI counseling session. Leveraging OpenAI's ability to understand context and generate human-like text, it forms empathetic responses to user inputs. Such a system could be part of a mental wellness app.

    ```ts
    new Job(client, {
      id: "openai-chatbot-counseling",
      name: "Chatbot Counseling Session",
      version: "0.0.1",
      trigger: eventTrigger({
        name: "openai.startCounselingSession",
        schema: z.object({}),
      }),
      integrations: {
        openai,
      },
      run: async (payload, io, ctx) => {
        const response = await io.openai.backgroundCreateChatCompletion(
          "background-counseling-chat-completion",
          {
            model: "gpt-3.5-turbo",
           messages: [
              {
                role: "system",
                content: "You are a helpful and empathetic AI counselor.",
              },
              {
                role: "user",
                content: "I've been feeling really stressed out lately.",
              },
            ],
          }
        );
        await io.logger.info("counseling session", response.choices);
      },
    });
    ```

3. ### "AI Roleplay Game Session" Job:

    This job creates a fantasy AI role-playing game. It could be fun for interactive storytelling or game development contexts.

    ```ts
    new Job(client, {
      id: "openai-roleplay-game-session",
      name: "AI Roleplay Game Session",
      version: "0.0.1",
      trigger: eventTrigger({
        name: "openai.startRoleplayGameSession",
      schema: z.object({}),
    }),
      integrations: {
        openai,
      },
      run: async (payload, io, ctx) => {
        const response = await io.openai.backgroundCreateChatCompletion(
          "background-roleplay-game-session-chat-completion",
          {
            model: "gpt-3.5-turbo",
            messages: [
              {
                role: "system",
                content: "You are an intelligent guide in a fantasy role-playing game.",
              },
              {
                role: "user",
                content: "I embark on a quest for the enchanted crown. What's the first step?",
              },
            ],
          }
        );
      await io.logger.info("roleplay game session", response.choices);
      },
    });
    ```

## Tasks

Tasks that are marked as "long-running" can last longer than your serverless timeout – they are performed on one of our background workers.

| Function Name                    | Description                                                               | Long-running? |
| -------------------------------- | ------------------------------------------------------------------------- | ------------- |
| `createCompletion`               | Generates text completions given a prompt.                                |
| `backgroundCreateCompletion`     | Generates text completions in the background.                             | ✔             |
| `createChatCompletion`           | Generates text completions in a conversational context.                   |
| `backgroundCreateChatCompletion` | Generates text completions in a conversational context in the background. | ✔             |
| `retrieveModel`                  | Retrieves a specific model by ID.                                         |
| `listModels`                     | Lists the available models.                                               |
| `createEdit`                     | Edits a given text prompt.                                                |
| `createImage`                    | Generates images from textual descriptions.                               |
| `createEmbedding`                | Generates embeddings for a given text.                                    |
| `createFile`                     | Uploads a file to the OpenAI API.                                         |
| `listFiles`                      | Lists the uploaded files.                                                 |
| `createFineTuneFile`             | Uploads a file for fine-tuning a model.                                   |
| `createFineTune`                 | Fine-tunes a model on a given task.                                       |
| `listFineTunes`                  | Lists the available fine-tunes.                                           |
| `retrieveFineTune`               | Retrieves a specific fine-tune by ID.                                     |
| `cancelFineTune`                 | Cancels a specific fine-tune by ID.                                       |
| `listFineTuneEvents`             | Lists the events for a specific fine-tune by ID.                          |
| `deleteFineTune`                 | Deletes a specific fine-tune by ID.                                       |
